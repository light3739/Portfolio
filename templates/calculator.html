<!DOCTYPE html>
<html>
<head>
    <title>DevOps Service Rate Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.6.1"></script>
</head>
<body class="bg-gray-800 text-gray-100">
<div class="text-center w-full">
    <h1 class="text-4xl lg:text-6xl calculator-title">DevOps Service Rate Calculator</h1>
</div>
<div class="max-w-screen-xl mb-20 mx-auto p-8 md:px-12 lg:px-16 xl:px-32 py-16 bg-gray-100 text-gray-900 rounded-lg shadow-lg calculator-container">
    <form id="rateForm" class="grid gap-4 grid-cols-1 md:grid-cols-2">
        <div>
            <label for="cloudServiceHours" class="block text-lg">Cloud Services (Rate: $50/hr)</label>
            <input class="w-full p-2 mb-2 rounded border border-gray-300" type="number" id="cloudServiceHours"
                   placeholder="Enter hours for Cloud Services" min="0">
        </div>
        <div>
            <label for="ciCdHours" class="block text-lg">CI/CD Pipeline (Rate: $40/hr)</label>
            <input class="w-full p-2 mb-2 rounded border border-gray-300" type="number" id="ciCdHours"
                   placeholder="Enter hours for CI/CD Pipeline" min="0">
        </div>
        <div>
            <label for="monitoringHours" class="block text-lg">Monitoring & Logging (Rate: $45/hr)</label>
            <input class="w-full p-2 mb-2 rounded border border-gray-300" type="number" id="monitoringHours"
                   placeholder="Enter hours for Monitoring & Logging" min="0">
        </div>
        <div>
            <label for="automationHours" class="block text-lg">Infrastructure Automation (Rate: $55/hr)</label>
            <input class="w-full p-2 mb-2 rounded border border-gray-300" type="number" id="automationHours"
                   placeholder="Enter hours for Infrastructure Automation" min="0">
        </div>
        <div class="md:col-span-2">
            <button class="w-full p-2 rounded text-white bg-blue-500 hover:bg-blue-600" type="submit">Calculate</button>
        </div>
    </form>
    <div class="result text-green-500 text-xl mt-4" id="totalCost"></div>
    <div id="popupContainer"></div>
</div>
<script>
    document.getElementById('rateForm').addEventListener('submit', function (event) {
        event.preventDefault();

        const cloudHours = parseFloat(document.getElementById('cloudServiceHours').value) || 0;
        const ciCdHours = parseFloat(document.getElementById('ciCdHours').value) || 0;
        const monitoringHours = parseFloat(document.getElementById('monitoringHours').value) || 0;
        const automationHours = parseFloat(document.getElementById('automationHours').value) || 0;

        if (cloudHours <= 0 && ciCdHours <= 0 && monitoringHours <= 0 && automationHours <= 0) {
            htmx.ajax('GET', '/calculator-popup', '#popupContainer');
            return;
        }

        const cloudRate = 50;
        const ciCdRate = 40;
        const monitoringRate = 45;
        const automationRate = 55;

        const totalCost = (cloudHours * cloudRate) + (ciCdHours * ciCdRate) + (monitoringHours * monitoringRate) + (automationHours * automationRate);
        document.getElementById('totalCost').textContent = `Total Cost: $${totalCost.toFixed(2)}`;
    });

    document.body.addEventListener('htmx:afterOnLoad', function () {
        var closeModalButton = document.getElementById('closeModal');
        if (closeModalButton) {
            closeModalButton.addEventListener('click', function () {
                document.getElementById('popupModal').classList.add('hidden');
            });
        }
    });

    window.addEventListener('load', function () {
        gsap.registerPlugin(ScrollTrigger);

        gsap.from('.calculator-title', {
            opacity: 0,
            x: -50,
            duration: 2,
            ease: 'power2.out',
            scrollTrigger: {
                trigger: '.calculator-title',
                start: 'top bottom',
                toggleActions: 'play none none none'
            }
        });

        gsap.from('.calculator-container', {
            opacity: 0,
            x: 50,
            duration: 2,
            ease: 'power2.out',
            scrollTrigger: {
                trigger: '.calculator-container',
                start: 'top bottom',
                toggleActions: 'play none none none'
            }
        });

        ScrollTrigger.refresh();
    });
</script>

</body>
</html>
